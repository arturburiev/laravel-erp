# laravel-erp
Демонстрация использования Laravel для разработки ERP систем с использованием задуманной автором концепции.

# Описание концепции

В файле ```routes/web.php``` представлены основные маршруты для работы системы:

```
Route::get('/erp/main', 'ErpController@main')->name('erp.main'); // основная страница с выводом меню
Route::get('/erp/list', 'ErpController@list')->name('erp.list'); // страница с выводом таблицы определенной сущности
Route::post('/erp/create', 'ErpController@create')->name('erp.create'); // метод для создания сущности (передаем название модели (сущности), названия полей и значения)
Route::put('/erp/update', 'ErpController@update')->name('erp.update'); // метод для изменения сущности (передаем название модели (сущности), названия полей и новые значения, а также id)
Route::delete('/erp/delete', 'ErpController@delete')->name('erp.delete'); // метод для удаления сущности (передаем название модели (сущности), id удаляемой сущности)
```

Далее рассмотрим конфигурационный файл ```erp_routes.php```, в нем находятся "модули", которые описываются следующими полями:

```
    'get_all_films' => [ // ключ - это ident нашего "модуля"
                            'name' => 'Фильмы', // название, отображаемое в меню
                            'settings' => [], // в перспективе тут будут лежать какие либо настройки для модуля (например, настройки доступа)
                            'params' => [ 
                                            'model' => 'App\Models\Film', // главная сущность из которой будет вызываться метод, возвращающий коллекцию объектов
                                            'method' => [
                                                'name' => 'getAll', // метод сущности, возвращающий коллекцию объектов
                                                'method_params' => [], // в перспективе тут будут лежать параметры для фильтрации
                                            ],
                                        ],
                        ],
```

При обращении по следующему url: ```/erp/list?ident=get_all_films``` (обрабатывается методом ```list``` в ```ErpController```), мы вызываем ```App\Models\Film::getAll()``` и получаем нашу коллекцию для отображения в таблице.

# Установка

1) Клонируем проект.
2) ```$ composer install```.
3) Настраиваем файл ```.env```, пример можно взять из ```.env.example```.
4) ```$ php artisan config:cache```
5) ```$ php artisan migrate``` (раскатываем миграции).
6) ```$ php artisan make:auth```.
7) ```$ php artisan db:seed``` (заполним созданные таблицы ```films``` и ```genre``` для примера).
8) ```$ php artisan serve``` (запускаем встроенный сервер).
9) Profit! :)

P.S. При изменении файла ```erp_routes.php``` необходим выполнять ```$ php artisan config:cache```.
P.P.S. Пока что это наброски, разумеется есть немало моментов, которые надо доработать (например хранить конфиг с модулями не массивом, а в файл ```json``` или же ```yml```).
